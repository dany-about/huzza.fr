<% user = participation.user %>
<div class="container ">
  <div class="col-md-9 mx-auto participationCard">
    <div class="card" style="margin-bottom: -0.2px;border-width: 3px;border-color: #27ae60">
      <div class="row row-grid" style="margin-top: -1rem">
      <%= link_to user_path(user), class:"ml-0" do %>
        <img alt="Image placeholder" src="https://image.noelshack.com/fichiers/2019/11/1/1552315427-noe-pp.jpg" class="avatar rounded-circle avatar-lg shadow hover-shadow-lg" style="margin-left:-0.5rem;margin-top:-1rem">
      <% end %>
        <% if disclaimer %>
          <%= link_to user_path(user), class:"ml-4" do %>
            <% case occasion %>
            <% when "participation_created" %>
              <p class="badge badge-secondary"><%= user.full_name %> - is participating</p>
            <% when "participation_achieved" %>
              <p class="badge badge-secondary"><%= user.full_name %> - a r√©ussi !</p>
            <% when "dare_accepted" %>
              <p class="badge badge-secondary"><%= user.full_name %> - rel√®ve le d√©fi !</p>
            <% when "achievement_rejected" %>          
              <p class="badge badge-secondary">La communaut√© remet en question la r√©alisation de <%= user.full_name %> !</p>          
            <% end %>
          <% end %>
          <div class="ml-9">
            <p class="badge badge-lg badge-success badge-circle"><%= participation.dare.difficulty_level %></p>
          </div>
        <% end %>
      </div>
      <div class="card-body pt-0">
        <div class="row row-grid" style="margin-left:-0.5rem;">
          <div class="col-sm-2 text-center">
            <% if disclaimer %>
              <p class="card-text">Level <%= user.rank %></p>
              <div class="<%= user.badge[:animation] %>">
                <h4 style="margin-top: 11px"><%= user.badge[:emote] %></h4>
              </div>
            <% else %>
              <% case participation.is_achieved %>
              <% when false %>
                <p class="badge badge-primary"> Ongoing </p>
              <% when nil %>
                <p class="badge badge-secondary"> Under review by the community </p>
              <% when true %>          
                <p class="badge badge-success"> Achieved!!</p>          
              <% end %>
              <p style="margin-top: 11px" class="badge badge-lg badge-success badge-circle"><%= participation.dare.difficulty_level %></p>
            <% end %>
          </div>
          <div class="col-sm-8 my-auto text-center">
            <h5 class="card-title" style="text-align: justify; text-justify: inter-word"><%= participation.dare.title %></h5>
          </div>
          <div class="col-sm-2 text-center">
            <% if StarDare.find_by(user: current_user, dare: participation.dare) == nil %>
              <%= link_to star_dares_path(dare: participation.dare), method: "POST", remote: true do %>
                <button type="button" class="btn-md btn-secondary rounded-circle btn-icon-only" style="font-size:19px;margin-top:-1rem">
                  <p class="ml-1 my-auto hover-rotate-360">‚≠ê</p>
                </button>
              <% end %>
            <% else %>
              <%= link_to star_dare_path(StarDare.find_by(dare: participation.dare, user: current_user)), method: "DELETE", remote: true do %>
                <button type="button" class="btn-md btn-dark rounded-circle btn-icon-only" style="font-size:19px;margin-top:-1rem">
                  <p class="ml-1 my-auto hover-rotate-360">‚≠ê</p>
                </button>
              <% end %>
            <% end %>
            <% if Reaction.find_by(user: current_user, participation: participation) == nil %>
              <%= link_to reactions_path(participation: participation, reaction: "strong"), method: "POST", remote: true do %>
                <button type="button" class="btn-md btn-secondary rounded-circle btn-icon-only mt-4" style="font-size: 19px"><p class="ml-1 my-auto hover-rotate-360">üí™</p></button>
              <% end %>
            <% else %>
              <%= link_to reaction_path(Reaction.find_by(participation: participation, user: current_user)), method: "DELETE", remote: true do %>
                <button type="button" class="btn-md btn-dark rounded-circle btn-icon-only mt-4" style="font-size: 19px"><p class="ml-1 my-auto hover-rotate-360">üí™</p></button>
              <% end %>
            <% end %>
          </div>
        </div>
      </div>
    </div>
    <div class="row row-grid mr-auto ml-auto collapse">
      <%= render 'shared/card_elements/tab_btns' %>
    </div>
    <div class="card collapse">
      <%= render 'shared/card_elements/description', dare: participation.dare %>
    </div>
    <div class="card collapse">
      <%= render 'shared/card_elements/comments', event: participation %>
    </div>
    <div class="card collapse">
      <%= render 'shared/card_elements/rating', dare: participation.dare %>
    </div>
  <% case occasion %>
  <% when "participation_created" %>
    <div class="card collapse">
  <% when "participation_achieved", "achievement_rejected" %>
    <div class="card">
  <% end %>
      <%= render 'shared/card_elements/proof', event: participation %>
    </div>
  </div>
</div>